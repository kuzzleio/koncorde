sudo: false
dist: trusty
language: node_js
node_js:
- '6'
- '8'
- '10'
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
script:
- npm test && npm run codecov
before_install:
- export CC="gcc-4.9" CXX="g++-4.9"
install:
- npm install
deploy:
  provider: npm
  email: support@kuzzle.io
  api_key:
    secure: 4sAYUpTOqz6xdEvkfUkHex8fo0OJfQYqcmnQR73ux8peaGYn4UazbhaNZ4rLF3p614GKnnct8HQ5G32COqPOFPvLH0VWhYBM30d24dKDIaOADsimOshk6MOrCPbb5+0ZJPXLyOasHN1wmIbqM/jYh7Kifsjttygd7vZfiDcm3X8eZJ836XE3nKCDLyqYFYittpvCD5Nci6YIRFPCU2c67Y6cbtR8eEPAE6lIilVr0EZb5Og88/cGtgA5jQ4TQkQYH7OTyDoH6nJX22nhWLqkj9L3xXIgTrKpP+bDxlFSE9NqJnB+P6EX2MhKj4HA0n9pjQsXWnHCmcq2mUbgKvQMiSAWn2PEZBSm7PGedyjoE7N04vuVueJdWiTb0R/P5d6jJoI9notcjtbkdv6hpOOTn6DmmpeG91YAlJrRUfOhzaEkhzyHKlz9IDCrmR8kMiFu5pKLmhxDSuQilCBWr5X5KY8VcHIJEkdmdY/PRZtXwH+gMyWeR2ccbnDFnnc8AuD0hJmT/IGSVCuXelKINn/y9L27I83Lhk96GDnU/IEX+svWNJn4VX+CnfdtQTJE+107ZrXKBXkaTnSYgxxqortvqZNDvOTGGmyYGYTfjbIeFrkSZZpk+d1UhkMWGZ/rPeQUE4vtGrt2UCuC/z2/m0H6NNd2E+tJ01XhO4b9NwatZGs=
  on:
    repo: kuzzleio/koncorde
    branch: master

sudo: false
dist: trusty
language: node_js
node_js:
- '6'
- '8'
- '10'
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
script:
- npm test && npm run codecov
before_install:
- export CC="gcc-4.9" CXX="g++-4.9"
install:
- npm install
deploy:
  provider: npm
  email: support@kuzzle.io
  api_key:
    secure: ZWTyptPHQx0tVqGS9+LFVyYYWBljoaMHD16eOsNUNSXIniF8iR2bZe8oTgvxWwDsGnhir93TjlcpXTZ8gs/craT62z9jyufwt1bapbPA7ahSTGGnqnoG0s8ir9Bf4LevkPkfUhPM07L+bgGyAj8T1yYU4+fEeeP8arqmEslvuqe9eSuD80DkpdLyxTPgZKA2RWa5jnoAiznXHOb+Xkbs6bca5scQVp0LdDOtDln/kAy04HHNsHxanMFdf2BX7Pvkg+LIEJQhEihTE58O/hPZ21WsImyPJPNULdQviDnxsLbQvMJPAIoRiCfWgoJxyjzekfR8a34CmV/A0woYPpOYsI/WXq5IrjO0/MlSeproSWQdEX9U7ilhmTjI0rrMBZSJhRvoJYUQ16gIfYmOSyi7Jtzuv0ll+CCgfy0jW2wKGuAfg+mvTwKTpxRGll0Sjp4KngL/oEp9LQBbv0xyQtBssMl8kEsXfcbcO5rS2VMd4ixYT23J9J/e8XvLsyBAVO0kQpD7xXy9dLPqBaZ+DoFrGu19iHgnRim7rN8dwZj6phxWLNrf0vdJxeQYXs9Rou0VRawYG1/pOUQweUQd2/Wczjx8I3oLT7zZNHgOVnFrKN57SCwefpaGBH9xDBFpdHH/hSx+VXVd9DQQqiYZYtrZBmz+2QNnORCzQk3rBhQyjLE=
  on:
    repo: kuzzleio/koncorde
    branch: master

sudo: false
dist: trusty
language: node_js
node_js:
- '6'
- '8'
- '10'
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
script:
- npm test && npm run codecov
before_install:
- export CC="gcc-4.9" CXX="g++-4.9"
install:
- npm install
deploy:
  provider: npm
  email: support@kuzzle.io
  api_key:
    secure: RXsJrDL4VmumK2eDvQu3Iy2buSMXmLNZuMEk5Geo1irfBxPNN1gezwECm38HhfJHZk3netbJy4YKVnvCoU+/f1BXyzBQ3haS+OP5yPwe8YmR7cIZKm7bMuQDO2TX7L9wWn0GmIWQ3VpKPN2jzZsEZxHLUQRvDL4hDaNR2fw7cFWLR76Riqd3ECu39DTrsiiRgXTZtJ0urhkhwAWuIjDoRRMfmf9ce09At4yKLTj8yhRgyx1/4+uO6QlEittIZjONGrF/d6Mie9EhuZMigq/QjSCUhNG0W0ikHZES6GTYTIaZ+l3m5ggAGiXO5+6iRafxVlwphpcYBlkFgrfcIaO6UjZz4N8hCGKSEhDr1jmATsL5GTITiOX38/ZaAhXHnRzaxTHL9oJ9LbIPlzi/UpokSng1b5ffOCpOAZKzM0kgrrhSIrRv4COSQxswE6ADtRrCtyWT7GeFK1ioeu22Z+fiPTHL7ry7nIqnxxDDINKjYhSXmH9/NFlC3bnJVX8EvrX4SiPoOcSQMCuXODlPHqUEYmjZvWbUe7zyuQc8LG4om3voHmJeSYOJXHi/hhkp/H1K2S8lQcjkI+pEIo3gjToIwoWxt4PjCzXpiVkPfQc6YkuGYw5DLTXMDzIWFHFu2b5sU/XlkkEQL9V73H5VQ4lgrPNOTqH1rMGbLmOYhE4aVrw=
  on:
    repo: kuzzleio/koncorde
    branch: master

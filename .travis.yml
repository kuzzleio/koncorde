sudo: false
dist: trusty
language: node_js
node_js:
- '12'
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
script:
- npm test && npm run codecov
before_install:
- export CC="gcc-4.9" CXX="g++-4.9"
install:
- npm install
deploy:
  provider: npm
  email: support@kuzzle.io
  api_key:
    secure: 0xp8WbR/ygFKlCNxthjCo9XPQgg+kz5hWyVnCBB39dRL0Kl3IzouApId28ttNRkNRPpO/IkWtuW0TP7E3kl2hE6TdATGc4aiio1BVof+fCEh/FqQU9kqxsKf3nx9ZjQpvOErPLxXR2BmKuY9FgENjOF/tehIJ30r7YSXu5sxYrM7q2XLTb27SZrTUpRwdcSxo1vdO+af+W5VlPk8w3rH1VxBcmiPysN7oBL9JFoS3yqXBCuIQP+KuvavgqSpcBO1Xh4B+ZlxvJzt667HJlaaAFL3XhEqg20eRGAGxRWfuzIMBqbh49Qf8l2OfpodHxREKVOKGW9jRebCwNLgkW1DXF6OpE+tnDLVCb8x/qhDU3si0NCGRzOPRv3Tg5PdaIMVzspS1XnloD1LIusppGhj7gheHDhPAwNejNje64ry4T7yIz5kCltL9IfcWNUJ6ep6O8sQafovO8DvJ+ZpPaBKJU2P9D6JVHxiiy1/EdGGAjfNdvrPJrUGihmCfDNzv8XxmeWtE1xOlLS4/ywK30P10VkFmfnYzloM30oYm+SL1Z1c9dJmc7Kan17hQ6xcGl7Ra+/9qBR8+evk0jozxwmsfS9Fqa4cvP4cOzWdDtRD7ejgNkfy/9Edz1Y9S5KK45UDEtGaQc7cGf7iqgf1UB54JUgNTtgvFYRKWgWZvXBvyTA=
  on:
    repo: kuzzleio/koncorde
    branch: master
